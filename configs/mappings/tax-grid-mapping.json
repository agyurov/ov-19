{
  "config_type": "tax_grid_mapping",
  "config_version": 1,
  "meta": {
    "title": "VATTool tax grid mapping (Odoo v19 → НАП)",
    "notes": [
      "This file maps Odoo tax tags (tax_tag_ids) to target output amount columns.",
      "Logic is strictly tag-based in v1 (no conditional rules).",
      "Each tag may map to multiple targets (multiple columns and/or multiple tables).",
      "Targets may only be 'pokupki' or 'prodagbi' (Deklar is derived separately).",
      "amount_column must match schema internal_name exactly; unknown columns are fatal.",
      "Within one ledger row, two tags must not write to the same (table, amount_column) — fatal collision."
    ],
    "last_updated": "YYYY-MM-DD",
    "maintainer": "PUT_NAME_OR_TEAM",
    "source": "Accountant-provided mapping"
  },
  "defaults": {
    "unknown_tag_behavior": "warn_and_skip_row_if_all_unknown",
    "trim_whitespace": true,
    "sort_tags_canonically": true
  },
  "tags": {
    "PUT_TAG_CODE_HERE": {
      "label": "Human readable description of this tag",
      "notes": "Optional notes for accountants/devs",
      "targets": [
        {
          "table": "pokupki",
          "amount_column": "base_full_credit",
          "label": "ДО с право на пълен данъчен кредит",
          "sign": 1,
          "notes": "Optional target-level notes"
        }
      ]
    },
    "PUT_ANOTHER_TAG": {
      "label": "Another tag",
      "targets": [
        {
          "table": "pokupki",
          "amount_column": "vat_full_credit",
          "label": "ДДС с право на пълен данъчен кредит",
          "sign": 1
        },
        {
          "table": "prodagbi",
          "amount_column": "base_20",
          "label": "ДО на облагаемите доставки със ставка 20%",
          "sign": -1
        }
      ]
    }
  }
}