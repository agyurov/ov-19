{
    "schema_name": "pokupki_schema",
    "file_encoding": "cp1251",
    "line_length": 274,
    "newline": "CRLF",
    "fields": [
        {
            "id": 1,
            "code": "03-02",
            "internal_name": "vat_number",
            "name_bg": "Идентификационен номер по ДДС на лицето",
            "start_pos": 1,
            "width_guess": 15,
            "type": "object",
            "required": true,
            "alignment": "left",
            "length": 15,
            "align": "left",
            "notes": "ИН по ДДС на регистрираното лице; задължително и трябва да съвпада с DEKLAR 00-01."
        },
        {
            "id": 2,
            "code": "03-01",
            "internal_name": "tax_period",
            "name_bg": "Данъчен период",
            "start_pos": 16,
            "width_guess": 6,
            "type": "object",
            "required": true,
            "alignment": "left",
            "length": 6,
            "align": "left",
            "pattern": "YYYYMM",
            "notes": "Отчетен период, напр. 202511 за ноември 2025; трябва да съвпада с DEKLAR 00-03."
        },
        {
            "id": 3,
            "code": "03-03",
            "internal_name": "branch_number",
            "name_bg": "Клон/обособено звено",
            "start_pos": 22,
            "width_guess": 4,
            "type": "float64",
            "required": false,
            "alignment": "right",
            "length": 4,
            "align": "right",
            "decimals": 0,
            "notes": "Уникален номер на клона; 0 или празно за централно управление. Стойност от 0 до 9999."
        },
        {
            "id": 4,
            "code": "03-04",
            "internal_name": "journal_row_number",
            "name_bg": "Пореден номер на документа в дневника",
            "start_pos": 26,
            "width_guess": 15,
            "type": "float64",
            "required": true,
            "alignment": "right",
            "length": 15,
            "align": "right",
            "decimals": 0,
            "notes": "Нарастващ пореден номер без пропуски и дублиране за съответния данъчен период; започва от 1."
        },
        {
            "id": 5,
            "code": "03-05",
            "internal_name": "document_type",
            "name_bg": "Вид на документа",
            "start_pos": 41,
            "width_guess": 2,
            "type": "object",
            "required": true,
            "alignment": "left",
            "length": 2,
            "align": "left",
            "allowed_values": [
                "01",
                "02",
                "03",
                "05",
                "07",
                "09",
                "11",
                "12",
                "13",
                "23",
                "91",
                "92",
                "93",
                "94"
            ],
            "notes": "Код за вид документ според ППЗДДС (фактура, дебитно/кредитно известие, протоколи, регистър и т.н.)."
        },
        {
            "id": 6,
            "code": "03-06",
            "internal_name": "document_number",
            "name_bg": "Номер на документа",
            "start_pos": 43,
            "width_guess": 20,
            "type": "object",
            "required": true,
            "alignment": "left",
            "length": 20,
            "align": "left",
            "notes": "Съгласно общите изисквания – реалният номер на фактура/протокол и т.н. В твоя стар пример този номер е бил сложна конкатенация (брояч + вид документ + фактура); тук описваме официалното поле – НАП вижда просто текстов номер."
        },
        {
            "id": 7,
            "code": "03-07",
            "internal_name": "document_date",
            "name_bg": "Дата на документа",
            "start_pos": 63,
            "width_guess": 10,
            "type": "object",
            "required": true,
            "alignment": "left",
            "length": 10,
            "align": "left",
            "pattern": "dd/MM/yyyy",
            "notes": "Дата на издаване на документа."
        },
        {
            "id": 8,
            "code": "03-08",
            "internal_name": "counterparty_vat",
            "name_bg": "Идентификационен номер на контрагента (доставчик)",
            "start_pos": 73,
            "width_guess": 15,
            "type": "object",
            "required": false,
            "alignment": "left",
            "length": 15,
            "align": "left",
            "notes": "ИН на доставчика (по ЗДДС или друг идентификационен номер). За чуждестранен/физически контрагент може да е специалният код 999999999999999."
        },
        {
            "id": 9,
            "code": "03-09",
            "internal_name": "counterparty_name",
            "name_bg": "Име на контрагента (доставчик)",
            "start_pos": 88,
            "width_guess": 50,
            "type": "object",
            "required": false,
            "alignment": "left",
            "length": 50,
            "align": "left",
            "notes": "Наименование на доставчика; задължително ако е попълнен ИН на контрагента."
        },
        {
            "id": 10,
            "code": "03-10",
            "internal_name": "goods_or_service_description",
            "name_bg": "Вид на стоката или обхват и вид на услугата",
            "start_pos": 138,
            "width_guess": 30,
            "type": "object",
            "required": false,
            "alignment": "left",
            "length": 30,
            "align": "left",
            "notes": "Кратко описание на стоката/услугата по документа."
        },
        {
            "id": 11,
            "code": "03-30",
            "internal_name": "base_and_vat_no_credit",
            "name_bg": "Данъчна основа и данък на получените доставки без право на данъчен кредит или без данък",
            "start_pos": 168,
            "width_guess": 15,
            "type": "float64",
            "required": true,
            "alignment": "right",
            "length": 15,
            "align": "right",
            "is_amount": true,
            "decimals": 2,
            "notes": "Поле описващо стойност; включва доставки/ВОП/чл.82/внос без право на данъчен кредит или без данък."
        },
        {
            "id": 12,
            "code": "03-31",
            "internal_name": "base_full_credit",
            "name_bg": "ДО с право на пълен данъчен кредит",
            "start_pos": 183,
            "width_guess": 15,
            "type": "float64",
            "required": true,
            "alignment": "right",
            "length": 15,
            "align": "right",
            "is_amount": true,
            "decimals": 2
        },
        {
            "id": 13,
            "code": "03-41",
            "internal_name": "vat_full_credit",
            "name_bg": "ДДС с право на пълен данъчен кредит",
            "start_pos": 198,
            "width_guess": 15,
            "type": "float64",
            "required": true,
            "alignment": "right",
            "length": 15,
            "align": "right",
            "is_amount": true,
            "decimals": 2
        },
        {
            "id": 14,
            "code": "03-32",
            "internal_name": "base_partial_credit",
            "name_bg": "ДО с право на частичен данъчен кредит",
            "start_pos": 213,
            "width_guess": 15,
            "type": "float64",
            "required": true,
            "alignment": "right",
            "length": 15,
            "align": "right",
            "is_amount": true,
            "decimals": 2
        },
        {
            "id": 15,
            "code": "03-42",
            "internal_name": "vat_partial_credit",
            "name_bg": "ДДС с право на частичен данъчен кредит",
            "start_pos": 228,
            "width_guess": 15,
            "type": "float64",
            "required": true,
            "alignment": "right",
            "length": 15,
            "align": "right",
            "is_amount": true,
            "decimals": 2
        },
        {
            "id": 16,
            "code": "03-43",
            "internal_name": "annual_correction",
            "name_bg": "Годишна корекция по чл. 73, ал. 8 ЗДДС",
            "start_pos": 243,
            "width_guess": 15,
            "type": "float64",
            "required": true,
            "alignment": "right",
            "length": 15,
            "align": "right",
            "is_amount": true,
            "decimals": 2
        },
        {
            "id": 17,
            "code": "03-44",
            "internal_name": "base_triangular",
            "name_bg": "ДО при придобиване на стоки от посредник в тристранна операция",
            "start_pos": 258,
            "width_guess": 15,
            "type": "float64",
            "required": true,
            "alignment": "right",
            "length": 15,
            "align": "right",
            "is_amount": true,
            "decimals": 2
        },
        {
            "id": 18,
            "code": "03-45",
            "internal_name": "special_supply_code",
            "name_bg": "Доставка по чл. 163а или внос по чл. 167а от ЗДДС",
            "start_pos": 273,
            "width_guess": 2,
            "type": "object",
            "required": false,
            "alignment": "left",
            "length": 2,
            "align": "left",
            "allowed_values": [
                "01",
                "02",
                "03",
                "07",
                "08",
                "51",
                "53",
                "54",
                "58"
            ],
            "notes": "Код за доставки по чл.163а/внос по чл.167а и операции по режим складиране на стоки до поискване."
        }
    ]
}